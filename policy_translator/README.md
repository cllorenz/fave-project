# README

## How to run

The Policy Translator was developed and tested with Python version 2.7.

### Usage by example

The following command lets the Policy Translator convert a policy matrix from
`examples/` to HTML in the same directory:

``python2 policy_translator.py -w -o examples/ifi.html examples/ifi-policy.txt``

The matrix can be investigated through any modern browser, e.g,

``firefox examples/ifi.html``

Note that the CSS `policies.css` needs to be placed in the same directory as the
HTML.
Also, it might be necessary to disable the browser's same origin policy for
local files.
In firefox this can be achieved by setting the key `privacy.file_unique_origin`
to `false` in `about:config`.


### General usage

The Policy Translator can be executed using the command

``python2 policy_translator.py [options] COMBO-FILE``

(the specified file must contain an inventory first, followed by policies)

or

``python2 policy_translator.py [options] INVENTORY-FILE POLICY-FILE``

(if inventory and policies are in separate files).

Despite the fact that there are mandatory options the Policy Translator does not
yield any useful result except for checking whether the inventory and policy
specifications are well formed.

### Options

Export of reachability tables in HTML or CSV format can be toggled using the
command-line options ``--html`` and ``--csv``.

Debug or trace output can be obtained by using ``--debug`` or ``--trace``.

 - `-o|--output <filename>` specifies the output file, e.g., `matrix.html` or
`ifi.fw`. Its content is determined by other options like `-w`, `-c` or `-fw`.

 - `-w|--html` generates an HTML file of the policy matrix. I.e., it shows the
communication associations and their limitations.
This is useful to check whether the inventory and role specifications work as
intended.

 - `-c|--csv` generates a CSV file of the policy matrix.

 - `-fw|--firewall` generates a firewall rule set for `iptables` and `ip6tables`
packet filters.

 - `-d|--debug` and `-t|--trace` enable debug or tracing output.

 - `--roles <filename>` dumps the roles as JSON to <filename>. This output is in
addition to the normal `-o` output.

 - `-i|--inv` generates a mapping between a role and its attributes as JSON.

 - `-r|--report <csvfile>` reads a result matrix (e.g., generated by a
verification tool like _FaVe_) for a given inventory and policy.
When combined with `-w` or `-c` the policy matrix will only highlight
differences between the result matrix and the policy specification.
This is useful to inspect which verification results comply with the security
policy.

 - `-s|--strict` see below.

### Strictness

Currently, there are two modes for specifying strictness for policies.
The default is a relaxed mode where roles may reach themselves without an
explicit policy rule.
This behaviour can be disabled by using the ``--strict`` option.

## Example files

Two example files that contain both an inventory and policies are enclosed with the policy translator. 

1. ``examples/ifi-policy.txt``
2. ``examples/fml-paper-policy.txt``

They can be used as input files for the Policy Translator using the first command specified in the section above.

Example: ``python2 policy_translator.py --firewall --output ifi.fw examples/ifi-policy.txt``

## Language specification of FPL

**TODO**

## License

Policy Translator is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

Policy Translator is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with Policy Translator.  If not, see <https://www.gnu.org/licenses/>.
