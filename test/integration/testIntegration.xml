<?xml version="1.0"?>
<config
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns="http://config"
	>
	<firewalls>
		<firewall name="fw0" key="net0_start_fw0">
			<table name="output">
				<rule name="r0">
					<action type="jump" target="net0_start_fw0_accept_r0"/>
				</rule>
			</table>
			<table name="accept">
				<rule name="r0" key="net0_start_fw0_accept_r0">
					<action type="accept"/>
				</rule>
			</table>
		</firewall>
		<firewall name="fw0" key="net0_n0_fw0">
			<table name="forward">
				<rule name="r0">
					<port direction="dst">80</port>
					<ip version="6" direction="dst">
						<address>2001::2</address>
					</ip>
					<proto>tcp</proto>
					<action type="jump" target="net0_n0_fw0_accept_r0"/>
				</rule>
				<rule name="r1">
					<port direction="dst">22</port>
					<ip version="6" direction="dst">
						<address>2001::3</address>
					</ip>
					<proto>tcp</proto>
					<action type="jump" target="net0_n0_fw0_accept_r0"/>
				</rule>
				<rule name="r2">
					<action type="jump" target="net0_n0_fw0_drop_r0"/>
				</rule>
			</table>
			<table name="accept">
				<rule name="r0" key="net0_n0_fw0_accept_r0">
					<action type="accept"/>
				</rule>
			</table>
			<table name="drop">
				<rule name="r0" key="net0_n0_fw0_drop_r0">
					<action type="drop"/>
				</rule>
			</table>
		</firewall>
		<firewall name="fw0" key="net0_n1_fw0">
			<table name="input">
				<rule name="r0">
					<port direction="dst">80</port>
					<proto>tcp</proto>
					<action type="jump" target="net0_n1_fw0_accept_r0"/>
				</rule>
				<rule name="r1">
					<action type="jump" target="net0_n1_fw0_drop_r0"/>
				</rule>
			</table>
			<table name="accept">
				<rule name="r0" key="net0_n1_fw0_accept_r0">
					<action type="accept"/>
				</rule>
			</table>
			<table name="drop">
				<rule name="r0" key="net0_n1_fw0_drop_r0">
					<action type="drop"/>
				</rule>
			</table>
		</firewall>
		<firewall name="fw0" key="net0_n2_fw0">
			<table name="input">
				<rule name="r0">
					<port direction="dst">22</port>
					<proto>tcp</proto>
					<action type="jump" target="net0_n2_fw0_accept_r0"/>
				</rule>
				<rule name="r1">
					<action type="jump" target="net0_n2_fw0_drop_r0"/>
				</rule>
			</table>
			<table name="accept">
				<rule name="r0" key="net0_n2_fw0_accept_r0">
					<action type="accept"/>
				</rule>
			</table>
			<table name="drop">
				<rule name="r0" key="net0_n2_fw0_drop_r0">
					<action type="drop"/>
				</rule>
			</table>
		</firewall>
	</firewalls>

	<networks>
		<network name="net0">
			<node name="start">
				<interface name="eth0" key="net0_start_eth0">
					<connections>
						<interface keyref="net0_n0_eth1"/>
					</connections>
					<routes>
						<ip version="6" direction="dst" negated="false">
							<address>2001::0/64</address>
						</ip>
					</routes>
				</interface>
				<firewall keyref="net0_start_fw0"/>
			</node>
			<node name="n0">
				<interface name="eth0" key="net0_n0_eth0">
					<connections>
						<interface keyref="net0_n1_eth0"/>
						<interface keyref="net0_n2_eth0"/>
					</connections>
					<routes>
						<ip version="6" direction="dst" negated="false">
							<address>2001::0/126</address>
						</ip>
					</routes>
				</interface>
				<interface name="eth1" key="net0_n0_eth1">
					<connections>
						<interface keyref="net0_start_eth0"/>
					</connections>
					<routes>
						<ip version="6" direction="dst" negated="true">
							<address>2001::0/126</address>
						</ip>
					</routes>
				</interface>
				<firewall keyref="net0_n0_fw0"/>
				<ip version="6">
					<address>2001::1</address>
				</ip>
			</node>
			<node name="n1">
				<interface name="eth0" key="net0_n1_eth0">
					<connections>
						<interface keyref="net0_n0_eth0"/>
					</connections>
				</interface>
				<firewall keyref="net0_n1_fw0"/>
				<ip version="6">
					<address>2001::2</address>
				</ip>
			</node>
			<node name="n2">
				<interface name="eth0" key="net0_n2_eth0">
					<connections>
						<interface keyref="net0_n0_eth0"/>
					</connections>
				</interface>
				<firewall keyref="net0_n2_fw0"/>
				<ip version="6">
					<address>2001::3</address>
				</ip>
			</node>
		</network>
	</networks>
</config>
